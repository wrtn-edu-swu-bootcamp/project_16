# 참고자료

> 개발을 위한 핵심 참고 정보

---

## 목차
1. [데이터 구조](#1-데이터-구조)
2. [기능 스펙 요약](#2-기능-스펙-요약)
3. [타겟 사용자](#3-타겟-사용자)
4. [Notion 연동](#4-notion-연동)
5. [서비스명 선택](#5-서비스명-선택)

---

## 1. 데이터 구조

### 1.1 Word 객체

```javascript
{
  id: string (UUID),
  original: string,        // 원문 단어 (예: "finished")
  lemma: string,           // 원형 (예: "finish")
  language: "en" | "ja" | "zh",
  partOfSpeech: "noun" | "verb" | "adjective" | "adverb",
  meanings: [
    {
      translation: string,  // 한국어 번역
      definition: string    // 영문 정의 (선택)
    }
  ],
  pronunciation: {
    ipa: string,           // [ˈfɪnɪʃ]
    hangul: string         // 피니쉬
  },
  example: string,         // 원본 트윗
  source: {
    tweetUrl: string,
    tweetText: string,
    timestamp: number
  },
  savedAt: number,
  status: "learning" | "review" | "mastered"
}
```

### 1.2 언어별 처리 규칙

#### 영어
- **원형화**: finished → finish, books → book
- **제외 단어**: a, an, the, in, on, at, and, but, I, you, is, am
- **품사 판별**: -tion(명사), -ed/-ing(동사), -ful/-less(형용사), -ly(부사)

#### 일본어
- **원형화**: 読んだ → 読む, 大きかった → 大きい
- **제외**: は, が, を, に, で, です, ます
- **발음**: 히라가나 + 로마자

#### 중국어
- **원형화**: 看了 → 看, 很好 → 好
- **제외**: 的, 了, 吗, 是, 有
- **발음**: 병음 + 성조

---

## 2. 기능 스펙 요약

### 2.1 트윗 공유 연동

| 플랫폼 | 구현 방법 | 우선순위 |
|--------|----------|---------|
| URL 입력 | Webhook 수신 | Phase 1 (MVP) |
| iOS | Share Extension API | Phase 2 |
| Chrome | Extension Manifest V3 | Phase 2 |
| Safari | Safari Extension | Phase 2 |

### 2.2 단어 추출 로직

```
트윗 텍스트 입력
  ↓
Gemini: 언어 감지 (en/ja/zh)
  ↓
Gemini: 품사 태깅
  ↓
필터: 명사/동사/형용사/부사만 선택
  ↓
LingvaNex: 번역
  ↓
Dictionary API: 정의/발음
  ↓
결과 JSON 반환
```

### 2.3 UI 표시 원칙

- **미니멀**: 기본 상태는 단어 + 뜻만
- **카드형**: 단어별 독립 카드
- **접기/펼치기**: 클릭 시 발음 + 예문 표시
- **반응형**: 모바일 우선 설계
- **로딩**: 2초 이내 표시

---

## 3. 타겟 사용자

### 3.1 페르소나 요약

**페르소나 1: 능동적 학습자 (23세, 대학생)**
- Notion 사용자, 체계적 정리 선호
- 일일 10-15개 단어 학습 목표
- 핵심 니즈: 자동 저장 + 복습 시스템

**페르소나 2: 실용적 학습자 (28세, 개발자)**
- 업무용 기술 영어 학습
- 통근 시간 활용
- 핵심 니즈: 빠른 분석 + 문맥 이해

**페르소나 3: 팬덤 활동자 (19세, 학생)**
- K-POP 팬, 일본어/중국어 관심
- 재미있는 학습 선호
- 핵심 니즈: 즉시 사용 가능한 표현

### 3.2 공통 요구사항

- **즉각성**: 2초 이내 분석
- **편의성**: 복사-붙여넣기 불필요
- **맥락**: 실제 사용 예시 제공
- **저장**: Notion 또는 서비스 내 저장

---

## 4. Notion 연동

### 4.1 데이터베이스 스키마

```javascript
// Notion API: Create Page
{
  parent: { database_id: "DB_ID" },
  properties: {
    "단어": { title: [{ text: { content: "finish" } }] },
    "뜻": { rich_text: [{ text: { content: "끝내다" } }] },
    "발음": { rich_text: [{ text: { content: "[ˈfɪnɪʃ]" } }] },
    "예문": { rich_text: [{ text: { content: "Just finished..." } }] },
    "언어": { select: { name: "영어" } },
    "품사": { select: { name: "동사" } },
    "출처": { url: "https://x.com/..." },
    "학습 날짜": { date: { start: "2026-01-21" } },
    "상태": { select: { name: "학습중" } },
    "복습 날짜": { date: { start: "2026-01-23" } }
  }
}
```

### 4.2 연동 프로세스

1. **OAuth 인증**: Notion OAuth 2.0
2. **DB 선택**: 기존 DB 선택 또는 신규 생성
3. **자동 저장**: n8n 워크플로우 트리거
4. **중복 확인**: Query API로 기존 단어 검색
5. **상태 관리**: 2일 후 자동으로 "복습필요"로 변경

### 4.3 Notion API 엔드포인트

```
POST /v1/pages                    # 페이지 생성
PATCH /v1/pages/{page_id}         # 페이지 업데이트
POST /v1/databases/{db_id}/query  # 중복 확인
GET /v1/databases/{db_id}         # DB 스키마 조회
```

---

## 5. 서비스명 선택

### 5.1 추천: TweetLingo

**선택 이유:**
- 명확한 서비스 정체성
- 기억하기 쉬움
- X 사용자 타겟팅에 적합

**대안:**
- WordFlow (플랫폼 확장성 우수)
- SnapWord (빠른 인상)

### 5.2 브랜딩 방향

- **로고**: 새 + 말풍선 또는 책 아이콘
- **컬러**: 
  - 메인: 밝은 블루 (#4A90E2)
  - 보조: 그린 (#7ED321)
- **슬로건**: "Learn languages, one tweet at a time"

---

## 6. 개발 우선순위

### Phase 1: MVP (4-6주)
1. 트윗 URL 입력 (Webhook)
2. Gemini + LingvaNex 단어 추출
3. 기본 UI (웹)
4. Notion 저장 (수동)

### Phase 2: 확장 (4-6주)
1. iOS Share Extension
2. Chrome Extension
3. Notion 자동 저장
4. 필터링/검색

### Phase 3: 고도화
1. 복습 알림
2. 학습 통계
3. 음성 발음
4. 다른 SNS 확장

---

## 7. 예외 처리

### 7.1 오류 상황

| 상황 | 메시지 | 처리 |
|------|--------|------|
| 비공개 트윗 | "비공개 트윗은 분석할 수 없습니다" | 안내 후 종료 |
| 삭제된 트윗 | "트윗을 불러올 수 없습니다" | 안내 후 종료 |
| 텍스트 없음 | "텍스트가 없는 트윗입니다" | 안내 후 종료 |
| 단어 3개 미만 | "학습할 단어가 부족합니다" | 안내 후 종료 |
| API 오류 | "일시적 오류가 발생했습니다" | 재시도 옵션 |
| Notion 연결 실패 | "Notion 연결 실패" | 서비스 내 저장으로 폴백 |

### 7.2 폴백 전략

- **Gemini 실패** → LingvaNex로 기본 번역
- **LingvaNex 실패** → Gemini로 번역
- **Dictionary API 실패** → Gemini로 정의 생성
- **Notion 실패** → 로컬 저장 후 재시도 큐

---

## 8. 성능 목표

| 항목 | 목표 | 측정 방법 |
|------|------|----------|
| 트윗 분석 시간 | 2초 이내 | 평균 응답 시간 |
| 단어 추출 정확도 | 90% 이상 | 수동 검증 |
| 번역 품질 | BLEU 0.7+ | 자동 평가 |
| Notion 저장 | 3초 이내 | API 응답 시간 |
| 앱 로딩 | 1초 이내 | 초기 화면 |

---

## 9. 비용 예측 (월 1,000 사용자 기준)

| 항목 | 비용 | 근거 |
|------|------|------|
| Gemini API | $0 ~ $50 | 무료 티어 + 초과분 |
| LingvaNex API | $0 ~ $30 | 무료 티어 + 초과분 |
| Dictionary API | $0 | 완전 무료 |
| X API | $100 | Basic 플랜 |
| Notion API | $0 | 사용자 계정 사용 |
| 서버/호스팅 | $20 ~ $50 | n8n 클라우드 또는 VPS |
| **총계** | $120 ~ $230 | 월 1,000 사용자 |

---

## 10. 기술적 고려사항

### 10.1 n8n 노드 사용

- **Google Gemini Chat**: 언어 감지, 품사 태깅, 단어 추출
- **LingvaNex**: 번역
- **HTTP Request**: X API, Dictionary API
- **Notion**: DB 쿼리, 페이지 생성/업데이트
- **Function**: JSON 변환, 날짜 계산
- **IF**: 조건 분기 (중복 확인 등)

### 10.2 데이터 흐름

```
사용자 → Webhook → n8n → Gemini → LingvaNex → Dictionary API → 결과 반환
                                                              ↓
                                                          Notion 저장
```

### 10.3 보안

- **API 키**: 환경 변수로 관리
- **사용자 인증**: JWT 토큰
- **Notion Token**: 사용자별 암호화 저장
- **HTTPS**: 모든 통신 암호화

---

## 문서 정보

- **작성일**: 2026년 1월 22일
- **용도**: 개발 참고용 핵심 정보 정리
- **출처**: 기존 6개 문서 통합
  - 기능_명세서.md
  - 콘텐츠_데이터_명세.md
  - Notion_연동_가이드.md
  - 서비스명_제안.md
  - 사용자_페르소나.md
  - 문서_요약.md, 문서_인덱스.md
